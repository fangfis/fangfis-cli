#!/usr/bin/env node

const program = require('commander');
const chalk = require('chalk');

const pkg = require('../package.json');
const version = pkg.version;

program
    .version(version, '    --version')
    .usage('[options] [dir]');
    // .option('-i, --init', 'Generate a new project')

program
    .usage('<command>');

program
    .command('init')
    .description('Generate a new project')
    .alias('i')
    .action(() => {
        require('../command/init')();
    }).on('--help', function () {
        console.log(chalk.green('  Examples: '));
        console.log(chalk.green('           fangfis init -h'));
    });

program
    .command('build')
    .description('build the project')
    .option('-w, --watch', 'Monitor the current project file changes and build them automatically')
    .option('-j, --js', 'Compressed JavaScript file (don\'t begin with entery_ JavaScript files)')
    .option('-c, --css', 'Compressed css file')
    .option('-i, --img', 'To copy images to the static files (not compressed)')
    .alias('b')
    .action((options) => {
        require('../command/build')(options);
    }).on('--help', function () {
        console.log(chalk.green('  Examples: '));
        console.log(chalk.green('           fangfis build -h'));
    });


program.on('--help', function () {
    console.log('');
    console.log(chalk.green('  Examples:'));
    console.log(chalk.green('    fangfis init  Create the necessary directory structure'));
    console.log(chalk.green('    fangfis bulid          Deal with the current project under dev folder all the files (css, img, js)'));
    console.log(chalk.green('    fangfis bulid [-w] -w: Monitor the current project file changes and build them automatically'));
    console.log(chalk.green('    fangfis bulid [-j] -j: Compressed JavaScript file (don\'t begin with entery_ JavaScript files)'));
    console.log(chalk.green('    fangfis bulid [-c] -c: Compressed css file'));
    console.log(chalk.green('    fangfis bulid [-i] -i: To copy images to the static files (not compressed)'));
    console.log('');
    console.log(chalk.yellow('  Please contact me if you have any questions. '));
    console.log(chalk.yellow('  mail: yueyanlei@fang.com,tankunpeng@fang.com '));
});
program.parse(process.argv);

if (!program.args.length) {
    program.help();
}

